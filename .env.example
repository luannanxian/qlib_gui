# ============================================================================
# Qlib-UI Environment Variables Template
# Copy this file to .env and update the values
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
APP_NAME=Qlib-UI
APP_ENV=development  # development, production, testing
DEBUG=true
LOG_LEVEL=INFO

# ============================================================================
# Backend Settings
# ============================================================================
BACKEND_HOST=localhost
BACKEND_PORT=8000
BACKEND_RELOAD=true  # Auto-reload on code changes (development only)

# ============================================================================
# Frontend Settings
# ============================================================================
FRONTEND_HOST=localhost
FRONTEND_PORT=3000
VITE_API_BASE_URL=http://localhost:8000/api
VITE_WS_BASE_URL=ws://localhost:8000/ws

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL (Production)
DATABASE_URL=postgresql://qlib_user:qlib_password@localhost:5432/qlib_ui

# SQLite (Development)
# DATABASE_URL=sqlite:///./qlib_ui.db

DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false  # Log SQL queries

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Celery Configuration
# ============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=Asia/Shanghai
CELERY_ENABLE_UTC=true

# ============================================================================
# Security Settings
# ============================================================================
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# Qlib Configuration
# ============================================================================
QLIB_DATA_DIR=./data/qlib
QLIB_REGION=cn  # cn, us
QLIB_PROVIDER=LocalDataProvider
QLIB_AUTO_MOUNT=true

# ============================================================================
# File Storage
# ============================================================================
DATA_DIR=./data
UPLOAD_DIR=./data/uploads
RESULT_DIR=./results
LOG_DIR=./logs
CACHE_DIR=./cache
TEMP_DIR=./cache/temp

MAX_UPLOAD_SIZE_MB=100

# ============================================================================
# Task Scheduling
# ============================================================================
MAX_PARALLEL_TASKS=2
TASK_TIMEOUT_SECONDS=3600
ENABLE_TASK_QUEUE=true

# ============================================================================
# Code Execution Security
# ============================================================================
VENV_DIR=./venvs
ENABLE_CODE_EXECUTION=true
CODE_EXECUTION_TIMEOUT=30
CODE_MAX_MEMORY_MB=512
CODE_MAX_CPU_PERCENT=50.0

# Allowed modules (comma-separated)
ALLOWED_MODULES=numpy,pandas,scipy,qlib,talib,math,statistics,datetime

# ============================================================================
# Monitoring & Logging
# ============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090

LOG_ROTATION=10MB
LOG_RETENTION=30 days
STRUCTURED_LOGGING=true

# ============================================================================
# Cache Configuration
# ============================================================================
CACHE_TTL=3600  # seconds
CACHE_MAX_SIZE=1000  # number of items
ENABLE_CACHE=true

# ============================================================================
# Email Configuration (Optional)
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-email-password
SMTP_FROM=noreply@qlib-ui.com
SMTP_TLS=true
SMTP_SSL=false

# ============================================================================
# Third-party Services (Optional)
# ============================================================================
# Sentry (Error tracking)
SENTRY_DSN=

# Analytics
GOOGLE_ANALYTICS_ID=

# ============================================================================
# Development Settings
# ============================================================================
ENABLE_API_DOCS=true  # Swagger UI
ENABLE_PROFILING=false
ENABLE_DEBUG_TOOLBAR=false

# ============================================================================
# Testing Settings
# ============================================================================
TEST_DATABASE_URL=sqlite:///./test.db
TEST_REDIS_URL=redis://localhost:6379/15

# ============================================================================
# Docker Settings (if using Docker)
# ============================================================================
DOCKER_BACKEND_PORT=8000
DOCKER_FRONTEND_PORT=3000
DOCKER_REDIS_PORT=6379
DOCKER_POSTGRES_PORT=5432

# ============================================================================
# Resource Limits
# ============================================================================
MAX_MEMORY_MB=8192
MAX_CPU_PERCENT=80.0
MAX_DISK_GB=100

# ============================================================================
# Feature Flags
# ============================================================================
FEATURE_ONBOARDING=true
FEATURE_DATA_MANAGEMENT=true
FEATURE_STRATEGY_BUILDER=true
FEATURE_BACKTEST=true
FEATURE_OPTIMIZATION=true
FEATURE_CUSTOM_FACTORS=true
FEATURE_SOCIAL_SHARING=false  # Future feature

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# Backup Configuration
# ============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # Cron expression: daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=./backups
