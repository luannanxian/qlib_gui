# ============================================
# Test Environment Configuration
# ============================================
# This file contains configuration for running tests
# Copy to .env.test and customize for your local setup

# ============================================
# Test Database Configuration
# ============================================
# ⚠️ SQLite已移除，所有测试统一使用MySQL
# 确保MySQL测试容器已启动：docker-compose -f docker-compose.test.yml up -d

# MySQL Test Database (真实物理数据库，不使用Docker)
# 使用与生产环境相同的数据库服务器
DATABASE_URL_TEST=mysql+aiomysql://remote:remote123456@192.168.3.46:3306/qlib_ui_test?charset=utf8mb4

# 测试隔离级别
# - transaction: 事务回滚隔离（开发推荐，快速）
# - session: 每个测试会话独立数据库（CI推荐，更严格）
TEST_ISOLATION_LEVEL=transaction

# MySQL Test Database Connection Pool Settings
# For tests, we use smaller pool sizes to avoid connection overhead
TEST_DB_POOL_SIZE=5
TEST_DB_MAX_OVERFLOW=5
TEST_DB_POOL_RECYCLE=1800
TEST_DB_POOL_PRE_PING=true
TEST_DB_ECHO=false

# ============================================
# Test Execution Settings
# ============================================
# Set to true to keep test database after tests (for debugging)
TEST_DB_KEEP_ALIVE=false

# Set to true to print SQL queries during tests (for debugging)
TEST_DB_ECHO_SQL=false

# Pytest settings
PYTEST_TIMEOUT=300
PYTEST_WORKERS=auto
